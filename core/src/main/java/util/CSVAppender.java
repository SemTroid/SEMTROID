package main.java.util;

import javax.imageio.stream.FileImageOutputStream;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.UUID;

public class CSVAppender {
    private static final String filePath = "F:\\GitHub\\GraduRepair\\GraduRepair\\output\\csvFiles\\test.csv";
    public static final String OLD_IMG_SAVED_PATH_PREFIX = "F:\\GitHub\\GraduRepair\\GraduRepair\\output\\csvFiles\\";
    public static final String NEW_IMG_SAVED_PATH_PREFIX = "F:\\GitHub\\GraduRepair\\GraduRepair\\output\\csvFiles\\";
    /**
     * 追加数据到csv文件
     * @param data
     */
    public static void appendToCSV(String[] data) {
        try (BufferedWriter writer = new BufferedWriter(new FileWriter(filePath, true))) {
            StringBuilder sb = new StringBuilder();
            // 构建CSV行
            for (int i = 0; i < data.length; i++) {
                sb.append(data[i]);
                if (i < data.length - 1) {
                    sb.append(",");
                }
            }
            sb.append("\n");
            // 写入文件
            writer.write(sb.toString());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * byte数组转图片并存储
     * @param data
     * @param path
     */
    public static void byte2png(byte[] data, String path){
        try{
            FileImageOutputStream imageOutput = new FileImageOutputStream(new File(path));
            imageOutput.write(data, 0, data.length);
            imageOutput.close();
//            System.out.println("Make Picture success,Please find image in " + path);
        } catch(Exception ex) {
            System.out.println("Exception: " + ex);
            ex.printStackTrace();
        }
    }
//    public static void main(String[] args) {
//
//        byte[] b1 = {-119, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 80, 0, 0, 0, 96, 8, 6, 0, 0, 0, -118, 107, -11, 0, 0, 0, 0, 4, 115, 66, 73, 84, 8, 8, 8, 8, 124, 8, 100, -120, 0, 0, 3, -47, 73, 68, 65, 84, 120, -100, -19, -101, 49, 78, 43, 49, 16, -122, 39, 8, -91, 101, -91, 8, -18, -79, -95, -124, 46, 5, 5, -57, 72, 46, 65, 79, 46, -108, 2, -119, 6, 113, 3, -50, 17, 39, 69, 110, 48, -81, -128, 60, -79, 94, -17, -114, 39, 99, 123, -68, 104, 62, 41, 69, -30, 89, 123, 98, -42, -1, -2, 99, 7, 0, 15, 68, -60, -79, -9, 84, 60, 5, -73, 63, 105, -1, -91, -13, 55, 12, 99, 90, 104, 107, 88, 110, -115, -29, -114, 39, -19, -33, 48, -116, 105, -95, -83, 33, -90, -127, -122, 97, -44, -124, 118, 45, 105, -75, -80, 97, 24, -102, 104, 107, 72, -60, -8, -24, -67, -72, -41, -77, -14, -95, -30, 103, -100, -117, 43, -63, -1, -62, -86, -33, -31, 90, 115, -16, 75, -16, 111, -104, -39, 76, -9, 30, -72, 82, 29, -3, 47, 80, 90, -61, 48, 64, -88, 29, 18, 105, 92, -18, -4, -117, -33, -1, 61, 17, -10, -42, -32, -71, -3, -41, -57, 85, -23, -76, -97, 127, 117, 26, -88, -83, 105, 92, 76, 3, 83, -109, -63, 71, 117, 124, -37, 4, 107, -31, -47, -4, 75, -84, -105, -86, 124, -37, 5, -116, -26, 111, 75, 88, -120, 77, -96, -108, 88, 13, 24, -14, 109, 84, 127, -71, 107, 81, -19, -4, 99, -12, 8, 127, 58, -6, -66, 96, 106, 62, 35, 115, -2, -92, 15, 100, -34, 32, -43, -111, 59, 127, -45, 64, 41, -91, 107, -55, 80, -68, 115, 14, -41, -21, 53, 46, -105, 75, 92, 46, -105, -72, 94, -81, -47, 57, 23, -44, 43, 110, -83, -102, 59, 127, 117, 61, 59, -99, 78, -8, -12, -12, 4, -50, -71, -50, -25, 119, 119, 119, -16, -10, -10, 6, -117, -59, -126, -107, 35, 85, 107, -89, 70, 125, 9, -65, -66, -66, -10, 38, 15, 0, -64, 57, 7, -37, -19, 86, 33, 35, 30, -22, 19, -8, -15, -15, 49, -40, -10, -7, -7, 89, 46, -111, 11, -23, 77, 96, 105, 31, 55, -97, -49, 7, 99, -25, -13, 57, 91, -29, 0, -66, -105, -19, -103, -36, -75, 112, 111, 2, 125, -51, -96, 52, -124, -85, 49, 126, -4, -29, -29, -29, 96, -20, -61, -61, -125, -72, -1, -36, -7, -85, 63, 68, -114, -57, 35, 62, 63, 63, 7, 31, 34, -17, -17, -17, -48, 52, 77, 112, -61, -11, 76, 1, 99, 95, -9, 102, 8, 34, -30, 126, -65, -57, -51, 102, -125, 109, -37, 98, -37, -74, -72, -39, 108, 112, -65, -33, 15, -38, -112, -40, -78, 44, 85, -118, -34, -85, -97, 80, -24, -126, 82, 62, 74, -22, -29, 98, -6, -25, 76, 122, 10, 31, -88, 90, -5, -90, 94, -94, -71, -105, 124, -81, 22, 46, -77, 42, 104, -90, -78, 103, -95, -18, 3, -89, 78, 112, 55, -26, -9, 109, -114, -120, 56, 118, -37, 83, -19, 84, 60, 34, -30, -31, 112, -128, -105, -105, 23, -8, -6, -6, -126, -5, -5, 123, 104, -37, 22, -100, 115, 112, 123, 123, 11, 0, -48, -117, -1, -55, -15, 127, -70, 84, 62, -95, -21, 99, -37, 67, -57, -82, -77, -95, -63, 53, -32, -42, -62, -44, 4, 82, -60, 76, -48, 88, -69, -113, -6, -71, 48, -73, 22, -82, 77, 27, -43, 53, 112, -22, -75, 112, -24, 41, -36, -45, 28, -95, 6, 118, 108, 17, 64, 119, 89, -60, -44, -62, 94, -1, -93, -73, 32, -107, 63, -87, 105, -3, -17, -30, -5, -62, 78, -116, -43, -62, -75, -41, -62, -108, 40, 115, 107, 97, 5, 116, 107, -31, -104, -46, -116, 83, 11, 43, -64, -85, -123, -71, -75, 104, 76, 127, -100, -8, 80, -5, 79, 76, 112, 63, -114, 59, -55, -39, 107, -31, -36, -75, 35, 23, -87, -17, -53, -115, -70, 15, -92, -88, -51, -9, -7, -88, -5, -64, -55, -29, 107, 94, 106, 13, -93, -30, 17, -57, -49, -123, 83, -12, -17, -121, 0, -29, -73, 50, 84, -1, -67, 67, -105, -46, -102, -105, -6, 92, 56, -126, -92, -5, -99, -22, 26, 88, -6, 92, 56, -75, 51, 82, -41, -64, 63, 81, 11, 75, -9, -13, -4, 24, 78, 45, 77, -43, -62, 49, -29, 75, -53, 49, 78, -1, -2, -9, -67, 74, 57, 120, -88, -99, -118, -89, 106, 97, 105, -1, -44, -11, -46, -2, -59, 2, 45, 125, 8, 77, -96, 22, -18, -48, -69, 3, -75, 18, 57, -77, 88, 44, 96, -73, -37, -63, 106, -75, -126, -90, 105, -96, 105, 26, 88, -83, 86, -80, -37, -19, -32, -26, -26, 70, 59, 61, -102, -40, 90, 52, -42, 55, 73, 125, 100, 96, -84, 81, -33, 38, -11, 113, -46, -4, -55, -27, 81, -38, 39, 6, -58, 59, 127, 94, 100, 124, 46, -22, 62, 112, 8, 127, -30, 106, 69, 93, 3, -89, -50, 53, -27, -29, -4, -9, 49, -15, 99, -60, -8, 54, -81, 93, 124, -18, -100, -11, 92, -104, -85, 113, -38, -75, -77, -108, -104, 9, 26, 107, -9, -79, 37, 44, -60, 38, 80, -118, -74, -113, -110, -114, -81, -99, -65, 97, 24, 127, -117, -46, 26, 38, 29, 95, 122, 125, -22, -4, 13, -61, -104, 54, -38, 26, 98, 26, 104, 24, 70, 73, 20, 52, -84, -13, -125, -59, -120, -15, -89, 125, 38, -110, 1, -18, 79, 102, 85, -1, 119, -113, -94, -8, -103, -120, -1, 7, -91, -26, -93, -10, -121, -98, -19, 7, -90, 70, -37, 71, -103, 15, 52, 12, -93, 36, -91, 53, 12, 3, 72, -58, -41, -50, -65, -72, -89, -14, 19, -86, -51, -41, 81, -8, -7, -101, -115, 17, 98, 19, 40, -28, 31, 76, -66, 76, -81, -53, 17, 44, -25, 0, 0, 0, 0, 73, 69, 78, 68, -82, 66, 96, -126};
//        byte[] b2 = {-119, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 80, 0, 0, 0, 96, 8, 6, 0, 0, 0, -118, 107, -11, 0, 0, 0, 0, 4, 115, 66, 73, 84, 8, 8, 8, 8, 124, 8, 100, -120, 0, 0, 3, -47, 73, 68, 65, 84, 120, -100, -19, -101, 49, 78, 43, 49, 16, -122, 39, 8, -91, 101, -91, 8, -18, -79, -95, -124, 46, 5, 5, -57, 72, 46, 65, 79, 46, -108, 2, -119, 6, 113, 3, -50, 17, 39, 69, 110, 48, -81, -128, 60, -79, 94, -17, -114, 39, 99, 123, -68, 104, 62, 41, 69, -30, 89, 123, 98, -42, -1, -2, 99, 7, 0, 15, 68, -60, -79, -9, 84, 60, 5, -73, 63, 105, -1, -91, -13, 55, 12, 99, 90, 104, 107, 88, 110, -115, -29, -114, 39, -19, -33, 48, -116, 105, -95, -83, 33, -90, -127, -122, 97, -44, -124, 118, 45, 105, -75, -80, 97, 24, -102, 104, 107, 72, -60, -8, -24, -67, -72, -41, -77, -14, -95, -30, 103, -100, -117, 43, -63, -1, -62, -86, -33, -31, 90, 115, -16, 75, -16, 111, -104, -39, 76, -9, 30, -72, 82, 29, -3, 47, 80, 90, -61, 48, 64, -88, 29, 18, 105, 92, -18, -4, -117, -33, -1, 61, 17, -10, -42, -32, -71, -3, -41, -57, 85, -23, -76, -97, 127, 117, 26, -88, -83, 105, 92, 76, 3, 83, -109, -63, 71, 117, 124, -37, 4, 107, -31, -47, -4, 75, -84, -105, -86, 124, -37, 5, -116, -26, 111, 75, 88, -120, 77, -96, -108, 88, 13, 24, -14, 109, 84, 127, -71, 107, 81, -19, -4, 99, -12, 8, 127, 58, -6, -66, 96, 106, 62, 35, 115, -2, -92, 15, 100, -34, 32, -43, -111, 59, 127, -45, 64, 41, -91, 107, -55, 80, -68, 115, 14, -41, -21, 53, 46, -105, 75, 92, 46, -105, -72, 94, -81, -47, 57, 23, -44, 43, 110, -83, -102, 59, 127, 117, 61, 59, -99, 78, -8, -12, -12, 4, -50, -71, -50, -25, 119, 119, 119, -16, -10, -10, 6, -117, -59, -126, -107, 35, 85, 107, -89, 70, 125, 9, -65, -66, -66, -10, 38, 15, 0, -64, 57, 7, -37, -19, 86, 33, 35, 30, -22, 19, -8, -15, -15, 49, -40, -10, -7, -7, 89, 46, -111, 11, -23, 77, 96, 105, 31, 55, -97, -49, 7, 99, -25, -13, 57, 91, -29, 0, -66, -105, -19, -103, -36, -75, 112, 111, 2, 125, -51, -96, 52, -124, -85, 49, 126, -4, -29, -29, -29, 96, -20, -61, -61, -125, -72, -1, -36, -7, -85, 63, 68, -114, -57, 35, 62, 63, 63, 7, 31, 34, -17, -17, -17, -48, 52, 77, 112, -61, -11, 76, 1, 99, 95, -9, 102, 8, 34, -30, 126, -65, -57, -51, 102, -125, 109, -37, 98, -37, -74, -72, -39, 108, 112, -65, -33, 15, -38, -112, -40, -78, 44, 85, -118, -34, -85, -97, 80, -24, -126, 82, 62, 74, -22, -29, 98, -6, -25, 76, 122, 10, 31, -88, 90, -5, -90, 94, -94, -71, -105, 124, -81, 22, 46, -77, 42, 104, -90, -78, 103, -95, -18, 3, -89, 78, 112, 55, -26, -9, 109, -114, -120, 56, 118, -37, 83, -19, 84, 60, 34, -30, -31, 112, -128, -105, -105, 23, -8, -6, -6, -126, -5, -5, 123, 104, -37, 22, -100, 115, 112, 123, 123, 11, 0, -48, -117, -1, -55, -15, 127, -70, 84, 62, -95, -21, 99, -37, 67, -57, -82, -77, -95, -63, 53, -32, -42, -62, -44, 4, 82, -60, 76, -48, 88, -69, -113, -6, -71, 48, -73, 22, -82, 77, 27, -43, 53, 112, -22, -75, 112, -24, 41, -36, -45, 28, -95, 6, 118, 108, 17, 64, 119, 89, -60, -44, -62, 94, -1, -93, -73, 32, -107, 63, -87, 105, -3, -17, -30, -5, -62, 78, -116, -43, -62, -75, -41, -62, -108, 40, 115, 107, 97, 5, 116, 107, -31, -104, -46, -116, 83, 11, 43, -64, -85, -123, -71, -75, 104, 76, 127, -100, -8, 80, -5, 79, 76, 112, 63, -114, 59, -55, -39, 107, -31, -36, -75, 35, 23, -87, -17, -53, -115, -70, 15, -92, -88, -51, -9, -7, -88, -5, -64, -55, -29, 107, 94, 106, 13, -93, -30, 17, -57, -49, -123, 83, -12, -17, -121, 0, -29, -73, 50, 84, -1, -67, 67, -105, -46, -102, -105, -6, 92, 56, -126, -92, -5, -99, -22, 26, 88, -6, 92, 56, -75, 51, 82, -41, -64, 63, 81, 11, 75, -9, -13, -4, 24, 78, 45, 77, -43, -62, 49, -29, 75, -53, 49, 78, -1, -2, -9, -67, 74, 57, 120, -88, -99, -118, -89, 106, 97, 105, -1, -44, -11, -46, -2, -59, 2, 45, 125, 8, 77, -96, 22, -18, -48, -69, 3, -75, 18, 57, -77, 88, 44, 96, -73, -37, -63, 106, -75, -126, -90, 105, -96, 105, 26, 88, -83, 86, -80, -37, -19, -32, -26, -26, 70, 59, 61, -102, -40, 90, 52, -42, 55, 73, 125, 100, 96, -84, 81, -33, 38, -11, 113, -46, -4, -55, -27, 81, -38, 39, 6, -58, 59, 127, 94, 100, 124, 46, -22, 62, 112, 8, 127, -30, 106, 69, 93, 3, -89, -50, 53, -27, -29, -4, -9, 49, -15, 99, -60, -8, 54, -81, 93, 124, -18, -100, -11, 92, -104, -85, 113, -38, -75, -77, -108, -104, 9, 26, 107, -9, -79, 37, 44, -60, 38, 80, -118, -74, -113, -110, -114, -81, -99, -65, 97, 24, 127, -117, -46, 26, 38, 29, 95, 122, 125, -22, -4, 13, -61, -104, 54, -38, 26, 98, 26, 104, 24, 70, 73, 20, 52, -84, -13, -125, -59, -120, -15, -89, 125, 38, -110, 1, -18, 79, 102, 85, -1, 119, -113, -94, -8, -103, -120, -1, 7, -91, -26, -93, -10, -121, -98, -19, 7, -90, 70, -37, 71, -103, 15, 52, 12, -93, 36, -91, 53, 12, 3, 72, -58, -41, -50, -65, -72, -89, -14, 19, -86, -51, -41, 81, -8, -7, -101, -115, 17, 98, 19, 40, -28, 31, 76, -66, 76, -81, -53, 17, 44, -25, 0, 0, 0, 0, 73, 69, 78, 68, -82, 66, 96, -126};
//        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss");
//        String path1 = CSVAppender.NEW_IMG_SAVED_PATH_PREFIX + dateFormat.format(new Date()) + "-" + UUID.randomUUID() + ".png";
//        String path2 = CSVAppender.OLD_IMG_SAVED_PATH_PREFIX + dateFormat.format(new Date()) + "-" + UUID.randomUUID() + ".png";
//        byte2png(b1, path1);
//        byte2png(b2, path2);
//        String[] data = {"pic1", path1, "pic2", path2};
//        // 追加到CSV文件
//        appendToCSV(data);
//    }
}
